{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n function itemTemplate(hit) {\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n  </a>\n   <div class=\"image-details\">\n                    <p>Likes: ${hit.likes}</p>\n                    <p>Views: ${hit.views}</p>\n                    <p>Comments: ${hit.comments}</p>\n                    <p>Downloads: ${hit.downloads}</p>\n                </div>\n</li>`;\n};\n    \n \n    \n\n\nexport   function itemsTamplate(hits) {\n  return hits.map(itemTemplate).join('');\n};\n","\nimport axios from \"axios\";\n // HTTP request\nexport default async function getPostsByUser(query,page) {\n    const BASE_URL = \"https://pixabay.com\";\n    const END_POINT = '/api/';\n    const API_KEY = '42305658-75508782eac06a666c1fb928b';\n\n    const params = {\n        key: API_KEY,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        q: query,\n        per_page: 15,\n        page: page\n    \n    };\n\n\nconst url = `${BASE_URL}${END_POINT}?${new URLSearchParams(params)}`;\n  const response = await axios.get(url);\n return response.data\n    };\n","// iziToast import\nimport iziToast from \"izitoast\";\n// additional iziToast import\nimport \"izitoast/dist/css/iziToast.min.css\";\n// SimpleLightbox import\nimport SimpleLightbox from \"simplelightbox\";\n// additional SimpleLightbox import\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { itemsTamplate } from './js/render-functions';\nimport getPostsByUser from './js/pixabay-api';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst getImage = document.querySelector(\".gallery\");\nconst loader = document.querySelector('.js-loader');\nconst loadMore = document.querySelector('.js-btn-load');\nconst loadMessage = document.querySelector('.load-message');\n// Total number of hits returned by the backend\nlet query;\nlet page;\nlet maxImage;\n\n// Функція для показу або приховування завантажувача\nfunction toggleLoader(show) {\n    if (show) {\n        loader.classList.remove('hidden');\n    } else {\n        loader.classList.add('hidden');\n    }\n}\n\n// Функція для виведення повідомлення про помилку\nfunction showError(msg) {\n    iziToast.error({\n        title: 'Error',\n        message: msg,\n        position: 'topCenter'\n    });\n}\n\n// Функція для відображення завантажувача\nfunction showLoader() {\n    toggleLoader(true);\n}\n\n// Функція для приховування завантажувача\nfunction hideLoader() {\n    toggleLoader(false);\n}\n\n// Додати обробник події для подання форми пошуку\nsearchForm.addEventListener('submit', onFormSubmit);\n// Додати обробник події для кнопки \"Завантажити ще\"\nloadMore.addEventListener('click', onLoadMoreClick);\n\n// Обробник події для подання форми пошуку\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    query = e.target.elements.search.value.trim();\n    page = 1;\n\n    if (!query) {\n        showError('Please enter a search query.');\n        return;\n    }\n\n    loadMessage.classList.remove('hidden');\n    showLoader();\n\n    try {\n        const data = await getPostsByUser(query, page);\n        if (data.totalHits === 0) {\n            getImage.innerHTML = ''; // Очищення списку зображень\n            showError('No images found for your search query. Please try again!');\n            e.target.elements.search.value = '';\n            return;\n        }\n\n        maxImage = Math.ceil(data.totalHits / 15);\n        getImage.innerHTML = '';\n\n        renderImages(data.hits);\n        loadMessage.classList.add('hidden');\n    } catch (error) {\n        showError('There was a problem fetching data. Please try again later.');\n        maxImage = 0;\n        getImage.innerHTML = '';\n    }\n\n    hideLoader();\n    checkVisibleBtnStatus();\n    e.target.reset();\n}\n\n// Обробник події для кнопки \"Завантажити ще\"\nasync function onLoadMoreClick() {\n    page += 1;\n    if (!query) {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search query',\n            position: 'topCenter'\n        });\n        return;\n    }\n    loadMessage.classList.remove('hidden');\n    showLoader();\n\n    try {\n        const data = await getPostsByUser(query, page);\n        renderImages(data.hits);\n\n        const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n        loadMessage.classList.add('hidden');\n        checkVisibleBtnStatus();\n    } catch (error) {\n        showError('There was a problem fetching data. Please try again later.');\n    }\n\n    hideLoader();\n}\n\n// Функція для відображення кнопки \"Завантажити ще\"\nfunction showLoadBtn() {\n    loadMore.classList.remove('hidden');\n}\n\n// Функція для приховування кнопки \"Завантажити ще\"\nfunction hideLoadBtn() {\n    loadMore.classList.add('hidden');\n}\n\n// Перевірка статусу видимості кнопки \"Завантажити ще\"\nfunction checkVisibleBtnStatus() {\n    if (page >= maxImage) {\n        hideLoadBtn();\n        iziToast.info({\n            title: 'Info',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topCenter'\n        });\n    } else {\n        showLoadBtn();\n    }\n}\n\n// Функція для відображення зображень\nfunction renderImages(hits) {\n    const markup = itemsTamplate(hits);\n    getImage.insertAdjacentHTML('beforeend', markup);\n\n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}"],"names":["itemTemplate","hit","itemsTamplate","hits","getPostsByUser","query","page","BASE_URL","END_POINT","params","url","axios","searchForm","getImage","loader","loadMore","loadMessage","maxImage","toggleLoader","show","showError","msg","iziToast","showLoader","hideLoader","onFormSubmit","onLoadMoreClick","data","renderImages","checkVisibleBtnStatus","cardHeight","showLoadBtn","hideLoadBtn","markup","SimpleLightbox"],"mappings":"+vBACC,SAASA,EAAaC,EAAK,CAC1B,MAAO;AAAA,kCACyBA,EAAI,aAAa;AAAA,sCACbA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,gCAGxCA,EAAI,KAAK;AAAA,gCACTA,EAAI,KAAK;AAAA,mCACNA,EAAI,QAAQ;AAAA,oCACXA,EAAI,SAAS;AAAA;AAAA,MAGjD,CAMS,SAASC,EAAcC,EAAM,CACpC,OAAOA,EAAK,IAAIH,CAAY,EAAE,KAAK,EAAE,CACvC,CClBe,eAAeI,EAAeC,EAAMC,EAAM,CACrD,MAAMC,EAAW,sBACXC,EAAY,QAGZC,EAAS,CACX,IAHY,qCAIZ,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,EAAGJ,EACH,SAAU,GACV,KAAMC,CAEd,EAGMI,EAAM,GAAGH,CAAQ,GAAGC,CAAS,IAAI,IAAI,gBAAgBC,CAAM,CAAC,GAEjE,OADkB,MAAME,EAAM,IAAID,CAAG,GACrB,IACjB,CCXA,MAAME,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAW,SAAS,cAAc,UAAU,EAC5CC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAc,SAAS,cAAc,eAAe,EAE1D,IAAIX,EACAC,EACAW,EAGJ,SAASC,EAAaC,EAAM,CACpBA,EACAL,EAAO,UAAU,OAAO,QAAQ,EAEhCA,EAAO,UAAU,IAAI,QAAQ,CAErC,CAGA,SAASM,EAAUC,EAAK,CACpBC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,EACT,SAAU,WAClB,CAAK,CACL,CAGA,SAASE,GAAa,CAClBL,EAAa,EAAI,CACrB,CAGA,SAASM,GAAa,CAClBN,EAAa,EAAK,CACtB,CAGAN,EAAW,iBAAiB,SAAUa,CAAY,EAElDV,EAAS,iBAAiB,QAASW,CAAe,EAGlD,eAAeD,EAAa,EAAG,CAK3B,GAJA,EAAE,eAAc,EAChBpB,EAAQ,EAAE,OAAO,SAAS,OAAO,MAAM,OACvCC,EAAO,EAEH,CAACD,EAAO,CACRe,EAAU,8BAA8B,EACxC,MACH,CAEDJ,EAAY,UAAU,OAAO,QAAQ,EACrCO,IAEA,GAAI,CACA,MAAMI,EAAO,MAAMvB,EAAeC,EAAOC,CAAI,EAC7C,GAAIqB,EAAK,YAAc,EAAG,CACtBd,EAAS,UAAY,GACrBO,EAAU,0DAA0D,EACpE,EAAE,OAAO,SAAS,OAAO,MAAQ,GACjC,MACH,CAEDH,EAAW,KAAK,KAAKU,EAAK,UAAY,EAAE,EACxCd,EAAS,UAAY,GAErBe,EAAaD,EAAK,IAAI,EACtBX,EAAY,UAAU,IAAI,QAAQ,CACrC,MAAe,CACZI,EAAU,4DAA4D,EACtEH,EAAW,EACXJ,EAAS,UAAY,EACxB,CAEDW,IACAK,IACA,EAAE,OAAO,OACb,CAGA,eAAeH,GAAkB,CAE7B,GADApB,GAAQ,EACJ,CAACD,EAAO,CACRiB,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,8BACT,SAAU,WACtB,CAAS,EACD,MACH,CACDN,EAAY,UAAU,OAAO,QAAQ,EACrCO,IAEA,GAAI,CACA,MAAMI,EAAO,MAAMvB,EAAeC,EAAOC,CAAI,EAC7CsB,EAAaD,EAAK,IAAI,EAEtB,MAAMG,EAAa,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OACnF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAS,EACDd,EAAY,UAAU,IAAI,QAAQ,EAClCa,GACH,MAAe,CACZT,EAAU,4DAA4D,CACzE,CAEDI,GACJ,CAGA,SAASO,GAAc,CACnBhB,EAAS,UAAU,OAAO,QAAQ,CACtC,CAGA,SAASiB,GAAc,CACnBjB,EAAS,UAAU,IAAI,QAAQ,CACnC,CAGA,SAASc,GAAwB,CACzBvB,GAAQW,GACRe,IACAV,EAAS,KAAK,CACV,MAAO,OACP,QAAS,6DACT,SAAU,WACtB,CAAS,GAEDS,GAER,CAGA,SAASH,EAAazB,EAAM,CACxB,MAAM8B,EAAS/B,EAAcC,CAAI,EACjCU,EAAS,mBAAmB,YAAaoB,CAAM,EAE9B,IAAIC,EAAe,YAAY,EACvC,QAAO,CACpB"}