{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n function itemTemplate(hit) {\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n  </a>\n   <div class=\"image-details\">\n                    <p>Likes: ${hit.likes}</p>\n                    <p>Views: ${hit.views}</p>\n                    <p>Comments: ${hit.comments}</p>\n                    <p>Downloads: ${hit.downloads}</p>\n                </div>\n</li>`;\n};\n    \n \n    \n\n\nexport   function itemsTamplate(hits) {\n  return hits.map(itemTemplate).join('');\n};\n","\nimport axios from \"axios\";\n // HTTP request\nexport default async function getPostsByUser(query,page) {\n    const BASE_URL = \"https://pixabay.com\";\n    const END_POINT = '/api/';\n    const API_KEY = '42305658-75508782eac06a666c1fb928b';\n\n    const params = {\n        key: API_KEY,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        q: query,\n        per_page: 15,\n        page: page\n    \n    };\n\n\nconst url = `${BASE_URL}${END_POINT}?${new URLSearchParams(params)}`;\n  const response = await axios.get(url);\n return response.data\n    };\n","// iziToast import\nimport iziToast from \"izitoast\";\n// additional iziToast import\nimport \"izitoast/dist/css/iziToast.min.css\";\n//  SimpleLightbox import\nimport SimpleLightbox from \"simplelightbox\";\n// additional SimpleLightbox import\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { itemsTamplate } from './js/render-functions';\nimport getPostsByUser from './js/pixabay-api';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst getImage = document.querySelector(\".gallery\");\nconst loader = document.querySelector('.js-loader');\nconst loadMore = document.querySelector('.js-btn-load');\nconst loadMessage = document.querySelector('.load-message');\n // Total number of hits returned by the backend\n\n\nlet query;\nlet page;\nlet maxImage;\n\n\n// ================================================\nsearchForm.addEventListener('submit', onFormSubmit);\nloadMore.addEventListener('click', onLoadMoreClick);\n// ================================================\nasync function onFormSubmit(e){\n   e.preventDefault();\n   query = e.target.elements.search.value.trim();\n    page = 1;\n\n     if (!query) {\n         showError('Sorry, there are no images matching your search query. Please try again!');\n         return;\n    };  \n    loadMessage.classList.remove('hidden');\n    showLoader();\n\n    try\n    {\n        const data = await getPostsByUser(query, page);\n    if (data.totalHits === 0) {\n           showError('There was a problem with the fetch operation. Please try again later.');\n         return;\n    } \n     \n\n    maxImage = Math.ceil(data.totalHits / 15);\n    getImage.innerHTML = '';\n    \n        renderImages(data.hits);\n        loadMessage.classList.add('hidden');\n    } catch (error)\n    {\n        showError(error);\n        maxImage = 0;\n        getImage.innerHTML = '';\n            }\n   \n    hideLoader();\n    checkVisibleBtnStatus();\n    e.target.reset()\n};\n//=====================================  \n\nasync function onLoadMoreClick() {\n    page += 1;\n     if (!query) {\n\n        return iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search query',\n            position: 'topCenter'\n        });\n    };  \nloadMessage.classList.remove('hidden');\n    showLoader();\n    const data = await getPostsByUser(query,page);\n   \n    renderImages(data.hits);\n\n    hideLoader();\n\n    const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2, // Прокручуємо на висоту двох карточок галереї\n        behavior: 'smooth' // Плавна анімація прокрутки\n    });\n    loadMessage.classList.add('hidden');\n    checkVisibleBtnStatus();\n   \n}\n\n\n//===============================================   \nfunction renderImages(hits) {\n    const markup = itemsTamplate(hits);\n    getImage.insertAdjacentHTML('beforeend', markup);\n\n     const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n};\n//==========================================\n\nfunction showLoadBtn()\n{\n    loadMore.classList.remove('hidden');\n}\n\nfunction hideLoadBtn()\n\n{\n    loadMore.classList.add('hidden');\n}\n\n\nfunction showLoader() {\n    loader.classList.remove('hidden');\n};\n\nfunction hideLoader() {\n     loader.classList.add('hidden');\n}\n\n\nfunction checkVisibleBtnStatus()\n{\n    if (page >= maxImage) {\n        hideLoadBtn();\n         iziToast.info({\n            title: 'Info',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topCenter'\n        });\n    } else {\n        showLoadBtn();\n       \n    }\n\n};\n      \nfunction showError(msg) { iziToast.error({\n                    title: 'Error',\n                    message: msg,\n                    position: 'topCenter'\n                });\n    \n}"],"names":["itemTemplate","hit","itemsTamplate","hits","getPostsByUser","query","page","BASE_URL","END_POINT","params","url","axios","searchForm","getImage","loader","loadMore","loadMessage","maxImage","onFormSubmit","onLoadMoreClick","showError","showLoader","data","renderImages","error","hideLoader","checkVisibleBtnStatus","iziToast","cardHeight","markup","SimpleLightbox","showLoadBtn","hideLoadBtn","msg"],"mappings":"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"}